# 期货数据管理系统 - 快速安装指南

## 快速开始

### 1. 环境准备
确保您的系统已安装：
- Python 3.8 或更高版本
- PostgreSQL 12 或更高版本

### 2. 自动安装
```bash
# 克隆或下载项目代码后，运行安装脚本
python setup.py
```

### 3. 数据库设置
创建数据库和用户：
```sql
-- 连接到PostgreSQL
psql -U postgres

-- 创建数据库和用户
CREATE DATABASE futures_data;
CREATE USER futures_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE futures_data TO futures_user;
\q
```

### 4. 配置文件
编辑 `.env` 文件，修改数据库连接信息：
```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=futures_data
DB_USER=futures_user
DB_PASSWORD=your_password
```

### 5. 启动程序

#### Windows用户
双击 `run.bat` 或在命令提示符中运行：
```cmd
run.bat
```

#### Linux/macOS用户
```bash
./run.sh
```

#### 或直接运行Python
```bash
python main.py
```

## 手动安装

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 创建目录结构
```bash
mkdir -p data/{raw,processed,csv} logs
```

### 3. 配置数据库
- 安装并启动PostgreSQL
- 创建数据库和用户（见上文）
- 配置连接信息

### 4. 启动程序
```bash
python main.py
```

## 验证安装

启动程序后：

1. **检查数据库连接**
   - 进入"系统设置"标签页
   - 点击"测试数据库连接"
   - 确认显示"连接正常"

2. **下载测试数据**
   - 进入"数据管理"标签页
   - 选择最近一周的日期范围
   - 选择一个交易所
   - 点击"下载数据"

3. **查看图表**
   - 进入"数据图表"标签页
   - 选择交易所和品种
   - 点击"显示图表"

4. **投研分析**
   - 进入"投研分析"标签页
   - 选择品种和分析类型
   - 点击"执行分析"或"生成交易信号"

5. **策略回测**
   - 进入"策略回测"标签页
   - 设置回测参数
   - 点击"开始回测"

6. **实盘交易**
   - 进入"实盘交易"标签页
   - 选择"模拟交易"进行测试
   - 点击"连接交易系统"

## 常见问题

### Q: 数据库连接失败
A: 
- 确认PostgreSQL服务正在运行
- 检查用户名密码是否正确
- 确认数据库名称是否存在

### Q: 依赖包安装失败
A:
- 更新pip: `pip install --upgrade pip`
- 使用国内源: `pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/`

### Q: 程序启动失败
A:
- 检查Python版本: `python --version`
- 查看错误日志: `logs/futures_system.log`
- 确认所有依赖已正确安装

## 获取帮助

如遇到问题，请：
1. 查看 `README.md` 获取详细文档
2. 检查 `logs/futures_system.log` 中的错误信息
3. 确认系统满足最低要求

---

## 新功能概览

### 📊 一站式投研分析
- **综合技术分析**: 多指标整合分析报告
- **维科夫量价分析**: 专业量价关系分析  
- **趋势强度分析**: 智能趋势强弱判断
- **震荡识别**: 自动识别震荡和突破点
- **支撑阻力分析**: 智能识别关键价位

### 📈 智能信号生成
- **多指标综合**: SMA、EMA、MACD、RSI、布林带等
- **维科夫量价**: 基于成交量的专业信号
- **权重优化**: 自适应指标权重调整
- **风险控制**: 市场状态感知的信号强度

### 🔙 专业回测系统
- **完整回测引擎**: 止损止盈、滑点、手续费
- **性能评估**: 夏普比率、最大回撤、胜率分析
- **风险管理**: ATR动态仓位管理
- **详细报告**: 完整的交易记录和分析

### 🤖 实盘交易框架
- **模拟交易**: 完整模拟交易环境
- **预留接口**: CTA期货实盘接口
- **自动交易**: 信号驱动的自动化交易
- **实时监控**: 账户和持仓状态监控

### 📁 增强数据管理
- **批量上传**: 文件、文件夹、ZIP批量处理
- **智能识别**: 自动格式和字段识别
- **数据验证**: 完整质量检查和清洗
- **无缝集成**: 直接导入数据库

### 🛠️ 自定义指标系统
- **公式编辑器**: 安全的指标公式编辑
- **丰富函数库**: 数学、技术分析、逻辑函数
- **指标管理**: 保存、加载、修改指标
- **实时测试**: 即时验证和预览

---

安装完成后，您就可以开始使用这个功能强大的一站式期货投研系统了！